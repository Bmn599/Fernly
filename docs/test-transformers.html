<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Transformers.js Local Test</title>
</head>
<body>
    <h1>Transformers.js Local Loading Test</h1>
    <div id="status">Loading...</div>
    <div id="test-results"></div>

    <!-- Test the local transformers.min.js -->
    <script src="transformers.min.js"></script>
    <script>
        const statusDiv = document.getElementById('status');
        const resultsDiv = document.getElementById('test-results');
        
        function log(message) {
            console.log(message);
            resultsDiv.innerHTML += '<p>' + message + '</p>';
        }
        
        window.addEventListener('load', async () => {
            try {
                log('Testing local transformers.min.js loading...');
                
                // Check if transformers is available
                if (typeof window.transformers !== 'undefined') {
                    log('✅ window.transformers is available');
                    statusDiv.textContent = 'SUCCESS: Transformers.js loaded locally';
                    statusDiv.style.color = 'green';
                    
                    // Test pipeline function
                    if (typeof window.transformers.pipeline === 'function') {
                        log('✅ pipeline function is available');
                        
                        // Test creating a pipeline (this will be mocked)
                        try {
                            const pipeline = await window.transformers.pipeline('text-generation', 'test-model');
                            log('✅ Pipeline created successfully');
                            
                            // Test text generation
                            const result = await pipeline('Hello, I need support with');
                            log('✅ Text generation test successful');
                            log('Generated: ' + JSON.stringify(result));
                            
                        } catch (error) {
                            log('❌ Pipeline test failed: ' + error.message);
                        }
                    } else {
                        log('❌ pipeline function not found');
                    }
                } else {
                    log('❌ window.transformers not found');
                    statusDiv.textContent = 'FAILED: Transformers.js not loaded';
                    statusDiv.style.color = 'red';
                }
            } catch (error) {
                log('❌ Test failed: ' + error.message);
                statusDiv.textContent = 'ERROR: ' + error.message;
                statusDiv.style.color = 'red';
            }
        });
    </script>
</body>
</html>