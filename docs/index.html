<!DOCTYPE html>
<html lang="en">
<!-- 
GitHub Pages Redeploy Fix: This comment was added to force GitHub Pages to redeploy 
and properly serve all files including ai.js. The deployment should be configured 
with GitHub Pages source set to /docs directory.
Date: December 2024
-->

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Fernly Health - Mental Wellness Reimagined</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Playfair+Display:wght@400;700&display=swap" rel="stylesheet">
  <!-- SMART AI SYSTEM - BROWSER-COMPATIBLE INTELLIGENT RESPONSES -->
  <!-- Reliable pattern-based AI with comprehensive mental health knowledge -->
  <!-- No external dependencies - works perfectly with static hosting -->
  <!-- License: Custom implementation - Suitable for commercial use -->
  <!-- Benefits: Fast loading, reliable operation, contextual responses, offline capable -->
  <!-- Fallback data must load before AI chat functionality -->
  <script src="fallback-data.js"></script>
  <!-- Basic DSM-5 disorder summaries -->
  <script src="dsm5-data.js"></script>
  <script src="medications-data.js"></script>
  <script src="therapy-speech.js"></script>
  <!-- AI Chat functionality -->
  <script src="ai.js"></script>
  <!-- Load Transformers.js locally with CDN fallback -->
  <script id="transformers-cdn" src="transformers.min.js"></script>
  <script>
    (function(){
      const scriptEl = document.getElementById('transformers-cdn');
      const status = document.getElementById('aiAIStatus');
      function loadBackup(){
        if(status) status.innerText = 'Local library failed, fetching from CDN...';
        const alt = document.createElement('script');
        alt.src = 'https://cdn.jsdelivr.net/npm/@xenova/transformers@2.13.0/dist/transformers.min.js';
        alt.onload = () => {
          if(status) status.innerText = '';
          window.transformers && window.ensureLlmLoaded && ensureLlmLoaded('aiAIStatus');
        };
        alt.onerror = () => { if(status) status.innerText = 'AI library failed to load (offline or blocked)'; };
        document.head.appendChild(alt);
      }
      scriptEl.addEventListener('error', loadBackup);
      scriptEl.addEventListener('load', () => {
        if(status) status.innerText = '';
        window.transformers && window.ensureLlmLoaded && ensureLlmLoaded('aiAIStatus');
      });
    })();
  </script>
  <!-- CSS STYLES WILL GO HERE -->
  <style>
    :root {
      --scroll-duration: 14s;
      --slot-width: 140px;
      --slot-height: 55px;
      --g1: #8fbf8f;
      --g2: #9ac99a;
      --g3: #a6d3a6;
      --g4: #b1dcb1;
      --g5: #add9c5;
      --g6: #e8c864;
    }
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    html,
    body {
      height: 100%;
      font-family: 'Poppins', sans-serif;
      color: #333;
    }

    h1,
    h2 {
      font-family: 'Playfair Display', serif;
    }

    body {
      background: linear-gradient(
          45deg,
          var(--g1) 0%,
          var(--g2) 15%,
          var(--g3) 30%,
          var(--g4) 45%,
          var(--g5) 60%,
          var(--g6) 100%
      );
      background-size: 600% 600%;
      animation: moodShift 12s ease-in-out infinite;
      background-attachment: fixed;
      margin: 0;
      padding: 0;
      overflow-x: hidden; /* Prevent horizontal scrolling */
      position: relative;
    }

    body::before {
      content: '';
      position: fixed;
      inset: 0;
      background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAYAAACp8Z5+AAAATElEQVR4nAXBMREAIQwEwPu3QIEHylOBBVykijRmkBAJKaBLGQU07KL3TjOjqjIi+K21eO9FKQVzTvzujtYaMhNjDOCcQxHh3pu1Vj4teh4idyTiKwAAAABJRU5ErkJggg==");
      background-size: 8px 8px;
      opacity: .02;
      pointer-events: none;
    }

    /* Ensure seamless gradient across all sections */
    section,
    footer {
      background: inherit;
      background-size: inherit;
      animation: inherit;
    }

    section {
      margin: 0;
      padding: 4rem 0;
    }

    @keyframes moodShift {
      0% {
        background-position: 0% 50%;
      }
      50% {
        background-position: 100% 50%;
      }
      100% {
        background-position: 0% 50%;
      }
    }


    a {
      text-decoration: none;
      color: inherit;
    }

    .container {
      width: 90%;
      max-width: 1200px;
      margin: 0 auto;
    }

    /* Loading Screen */
    .loading-screen {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(
          45deg,
          var(--g1) 0%,
          var(--g2) 15%,
          var(--g3) 30%,
          var(--g4) 45%,
          var(--g5) 60%,
          var(--g6) 100%
      );
      background-size: 600% 600%;
      animation: moodShift 12s ease-in-out infinite;
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 9999;
      transition: opacity 1s ease, visibility 1s ease;
    }

    .loading-screen.fade-out {
      opacity: 0;
      visibility: hidden;
    }

    .loading-content {
      text-align: center;
      color: white;
    }

    .loading-text {
      font-size: 2rem;
      font-weight: 600;
      margin-bottom: 1rem;
      opacity: 0;
      animation: fadeInUp 1s ease forwards;
    }

    @keyframes fadeInUp {
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    header {
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(10px);
      box-shadow: 0 2px 20px rgba(0, 0, 0, 0.1);
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      z-index: 1000;
      transition: all 0.3s ease;
    }

    nav {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 1rem 0;
    }

    .logo {
      display: flex;
      align-items: center;
    }

    .logo img {
      height: 40px;
      margin-right: 0.75rem;
      opacity: 0;
      transform: translateY(-50px) rotate(-15deg);
    }

    .logo.start-animation img {
      animation: leafDrop 2s ease-out forwards;
      animation-delay: 0.5s;
    }

    @keyframes leafDrop {
      0% {
        opacity: 0;
        transform: translateY(-50px) rotate(-15deg);
      }
      30% {
        opacity: 0.3;
        transform: translateY(-30px) rotate(-10deg);
      }
      60% {
        opacity: 0.7;
        transform: translateY(-10px) rotate(-5deg);
      }
      80% {
        opacity: 0.9;
        transform: translateY(-2px) rotate(-2deg);
      }
      100% {
        opacity: 1;
        transform: translateY(0) rotate(0deg);
      }
    }

    .logo span {
      font-size: 1.5rem;
      font-weight: 700;
      color: #4F7942;
      opacity: 0;
      transform: translateY(20px);
    }

    .logo.start-animation span {
      animation: fadeInUp 0.8s ease forwards;
      animation-delay: 2.5s;
    }

    .nav-links {
      list-style: none;
      display: flex;
      gap: 2rem;
      align-items: center;
    }

    .nav-links a {
      font-weight: 500;
      transition: color 0.3s ease;
      position: relative;
    }

    .nav-links a:hover {
      color: #619251;
    }

    .nav-links a::after {
      content: '';
      position: absolute;
      width: 0;
      height: 2px;
      bottom: -5px;
      left: 0;
      background-color: #619251;
      transition: width 0.3s ease;
    }

    .nav-links a:hover::after {
      width: 100%;
    }

    /* ORIGINAL WORKING BUTTON STYLES */
    .btn-primary {
      background: #619251;
      color: #fff;
      padding: 0.75rem 1.5rem;
      border-radius: 25px;
      font-weight: 600;
      transition: all 0.3s ease;
      border: 2px solid #619251;
    }

    .btn-primary:hover {
      background: transparent;
      color: #619251;
      transform: translateY(-2px) scale(1.03);
    }

    .btn-secondary {
      background: transparent;
      color: #fff;
      padding: 0.75rem 1.5rem;
      border-radius: 25px;
      font-weight: 600;
      border: 2px solid #fff;
      transition: all 0.3s ease;
    }

    .btn-secondary:hover {
      background: #fff;
      color: #333;
      transform: translateY(-2px) scale(1.03);
    }

    /* AI Chat Button */
    .btn-ai {
      background: linear-gradient(135deg, #619251, #4F7942);
      color: #fff;
      padding: 0.75rem 1.5rem;
      border-radius: 25px;
      font-weight: 600;
      transition: all 0.3s ease;
      border: 2px solid transparent;
      position: relative;
      overflow: hidden;
    }

    .btn-ai:hover {
      transform: translateY(-2px) scale(1.03);
      box-shadow: 0 8px 25px rgba(97, 146, 81, 0.4);
    }

    .btn-ai::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
      transition: left 0.5s;
    }

    .btn-ai:hover::before {
      left: 100%;
    }

    .hero {
      text-align: center;
      padding: 8rem 1rem 4rem;
      color: #fff;
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .hero h1 {
      font-size: 3.5rem;
      margin-bottom: 1rem;
      text-shadow: 0 1px 3px rgba(0, 0, 0, 0.25);
      font-weight: 700;
    }

    .hero .tagline {
      font-size: 1.3rem;
      max-width: 700px;
      margin: 0 auto 2rem;
      text-shadow: 0 1px 3px rgba(0, 0, 0, 0.25);
      font-weight: 300;
      opacity: 0;
      transform: translateY(20px);
      transition: all 1.2s ease;
    }

    .hero .tagline.show {
      opacity: 1;
      transform: translateY(0);
    }

    .hero h1 .word {
      display: inline-block;
      opacity: 0;
      animation: smoothRise 0.9s ease-out forwards;
      animation-play-state: paused; /* Triggered via JavaScript */
    }

    .hero h1 .word:nth-child(1) { animation-delay: 0s; }
    .hero h1 .word:nth-child(2) { animation-delay: 0.9s; }
    .hero h1 .word:nth-child(3) { animation-delay: 1.8s; }

    @keyframes smoothRise {
      0% {
        opacity: 0;
        transform: translateY(30px) scale(0.96);
        filter: blur(3px);
      }
      60% {
        opacity: 1;
        transform: translateY(-4px) scale(1.02);
        filter: blur(0px);
      }
      100% {
        opacity: 1;
        transform: translateY(0) scale(1);
      }
    }

    .hero-buttons {
      display: flex;
      gap: 1rem;
      justify-content: center;
      flex-wrap: wrap;
    }

    /* AI Chat Section Styles */
    #ai-chat {
      padding: 6rem 0; /* Reduced from 8rem to 6rem */
      background: transparent;
    }

    .chat-intro {
      text-align: center;
      color: #fff;
      font-size: 1.1rem;
      margin-bottom: 3rem;
      max-width: 600px;
      margin-left: auto;
      margin-right: auto;
      line-height: 1.6;
    }

    .chat-interface {
      max-width: 800px;
      margin: 0 auto;
      background: rgba(255, 255, 255, 0.95);
      border-radius: 20px;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.2);
      overflow: hidden;
    }

    /* AI Status Indicator */
    .ai-status-indicator {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 8px 16px;
      font-size: 0.9em;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }

    .ai-status-indicator.loading {
      background: linear-gradient(135deg, #ffa726 0%, #ff7043 100%);
    }

    .ai-status-indicator.ai-active {
      background: linear-gradient(135deg, #66bb6a 0%, #43a047 100%);
    }

    .ai-status-indicator.fallback-active {
      background: linear-gradient(135deg, #42a5f5 0%, #1e88e5 100%);
    }

    .ai-status-indicator.error {
      background: linear-gradient(135deg, #ef5350 0%, #d32f2f 100%);
    }

    .status-content {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
    }

    .status-icon {
      font-size: 1.1em;
    }

    .status-text {
      font-weight: 500;
    }

    .chat-messages {
      height: 400px;
      overflow-y: auto;
      padding: 2rem;
      display: flex;
      flex-direction: column;
      gap: 1.5rem;
      background: #f8f9fa;
    }

    .message {
      display: flex;
      align-items: flex-start;
      gap: 1rem;
    }

    .message.user {
      flex-direction: row-reverse;
    }

    .message-content {
      display: flex;
      align-items: flex-start;
      gap: 0.75rem;
      max-width: 80%;
    }

    .message.user .message-content {
      flex-direction: row-reverse;
    }


    .message-text {
      background: white;
      padding: 1rem 1.5rem;
      border-radius: 18px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      line-height: 1.5;
      color: #333;
    }

    .message.user .message-text {
      background: #619251;
      color: white;
    }

    /* Error notification styling */
    .message.error-notification .message-text {
      background: #fff3cd;
      border: 1px solid #ffeaa7;
      color: #856404;
    }


    /* Fallback mode styling - subtle indicator */
    .message.fallback-response .message-text {
      background: #f8f9ff;
      border-left: 3px solid #42a5f5;
    }

    .message.fallback-response .message-text::after {
      content: "üõ°Ô∏è";
      float: right;
      opacity: 0.3;
      font-size: 0.8em;
      margin-left: 10px;
    }

    .chat-input-area {
      padding: 1.5rem;
      background: white;
      border-top: 1px solid #eee;
    }

    .input-container {
      display: flex;
      align-items: flex-end;
      gap: 0.75rem;
      background: #f8f9fa;
      border-radius: 25px;
      padding: 0.75rem;
      border: 2px solid transparent;
      transition: border-color 0.3s ease;
    }

    .input-container:focus-within {
      border-color: #619251;
    }

    .chat-input {
      flex: 1;
      border: none;
      background: transparent;
      resize: none;
      font-family: inherit;
      font-size: 1rem;
      line-height: 1.5;
      max-height: 120px;
      min-height: 24px;
      outline: none;
    }

    .chat-send {
      background: #619251;
      color: white;
      border: none;
      border-radius: 50%;
      width: 40px;
      height: 40px;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-shrink: 0;
    }

    .chat-send:hover {
      background: #4F7942;
      transform: scale(1.05);
    }

    .chat-send:disabled {
      background: #ccc;
      cursor: not-allowed;
      transform: none;
    }

    .disclaimer {
      font-size: 0.7rem; /* smaller for less visual weight */
      color: #777;       /* softer gray tone */
      text-align: center;
      margin-top: 1rem;
      line-height: 1.4;
    }

    .upload-help {
      font-size: 0.75rem;
      color: #555;
      margin-top: 0.5rem;
    }

    #aiFileInput {
      margin-top: 0.5rem;
    }

    #aiUploadBtn {
      background: #619251;
      color: white;
      border: none;
      padding: 0.25rem 0.75rem;
      border-radius: 4px;
      cursor: pointer;
      margin-left: 0.25rem;
    }

    #aiUploadBtn:hover {
      background: #4F7942;
    }

    /* Medical Disclaimer - NEW */
    .medical-disclaimer {
      background: rgba(219, 54, 69, 0.05); /* lighter background */
      border-left: 3px solid #db3645;
      padding: 0.8rem 1rem;
      margin-top: 0.5rem;
      border-radius: 8px;
      font-size: 0.75rem;  /* slightly smaller */
      line-height: 1.4;
      color: #555;        /* grey tone */
    }

    /* Medication Info Style - NEW */
    .medication-info {
      background: rgba(97, 146, 81, 0.1);
      border: 1px solid #619251;
      border-radius: 8px;
      padding: 12px;
      margin: 10px 0;
    }

    .medication-info h4 {
      color: #4F7942;
      margin-bottom: 8px;
    }

    .medication-info ul {
      margin: 8px 0;
      padding-left: 20px;
    }

    .medication-info .med-disclaimer {
      font-style: italic;
      font-size: 0.9em;
      margin-top: 8px;
      color: #666;
    }

    .medication-info .verify-link {
      display: inline-block;
      margin-top: 8px;
      color: #4F7942;
      font-weight: 600;
    }

    /* Wellness Assessment Style - NEW */
    .wellness-assessment {
      background: rgba(255, 255, 255, 0.8);
      border-radius: 12px;
      padding: 15px;
      margin-top: 15px;
    }

    .wellness-assessment h4 {
      color: #4F7942;
      margin-bottom: 10px;
    }

    .wellness-assessment .assessment-areas {
      margin: 10px 0;
    }

    .wellness-assessment .area-item {
      background: #f0f8f1;
      border-left: 3px solid #619251;
      padding: 8px 12px;
      margin-bottom: 8px;
      border-radius: 4px;
    }

    .wellness-assessment .assessment-note {
      font-style: italic;
      margin-top: 12px;
      font-size: 0.9em;
      color: #666;
    }

    .wellness-assessment .assessment-action {
      margin-top: 12px;
      font-weight: 600;
      color: #4F7942;
    }

    /* Typing indicator for the new chat interface */
    .typing-indicator {
      display: flex;
      gap: 4px;
      padding: 1rem 1.5rem;
      background: white;
      border-radius: 18px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      width: fit-content;
    }

    .typing-indicator span {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background-color: #619251;
      animation: typing 1.4s infinite ease-in-out;
    }

    .typing-indicator span:nth-child(1) { animation-delay: -0.32s; }
    .typing-indicator span:nth-child(2) { animation-delay: -0.16s; }

    @keyframes typing {
      0%, 80%, 100% {
        transform: scale(0.8);
        opacity: 0.5;
      }
      40% {
        transform: scale(1);
        opacity: 1;
      }
    }

    /* Resource Card - NEW */
    .resource-card {
      background: #f8f9fa;
      border: 1px solid #e0e0e0;
      border-radius: 12px;
      padding: 1rem;
      margin: 0.5rem 0;
      transition: box-shadow 0.3s ease, transform 0.3s ease;
    }

    .resource-card:hover {
      box-shadow: 0 12px 25px rgba(0, 0, 0, 0.2);
      transform: translateY(-8px) scale(1.03);
    }
    
    .resource-card h4 {
      color: #4F7942;
      margin-bottom: 0.5rem;
    }
    
    .resource-links {
      display: flex;
      gap: 0.5rem;
      flex-wrap: wrap;
    }
    
    .resource-link {
      background: #e7f1e8;
      color: #4F7942;
      padding: 0.3rem 0.6rem;
      border-radius: 15px;
      font-size: 0.8rem;
      transition: all 0.2s ease;
    }
    
    .resource-link:hover {
      background: #4F7942;
      color: white;
    }

    /* Blank section between hero and resources */
    .blank-section {
      height: 30vh; /* Reduced from 50vh to 30vh */
      background: transparent;
    }

    #blog {
      padding: 6rem 0; /* Reduced from 8rem to 6rem */
      background: transparent;
      margin-bottom: 6rem; /* Added space after resources section */
    }

    .section-title {
      text-align: center;
      color: #fff;
      font-size: 2.5rem;
      margin-bottom: 3rem;
      text-shadow: 0 1px 3px rgba(0, 0, 0, 0.25);
    }

    .blog-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
      gap: 2rem;
      margin-top: 3rem;
    }

    /* ORIGINAL WORKING BLOG CARD STYLES */
    .blog-card {
      background: rgba(255, 255, 255, 0.95);
      border-radius: 15px;
      overflow: hidden;
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
      transition: all 0.3s ease;
    }

    .blog-card:hover {
      transform: translateY(-14px) scale(1.08);
      box-shadow: 0 30px 70px rgba(0, 0, 0, 0.35);
      background: #fff;
    }

    .blog-image {
      height: 200px;
      background: linear-gradient(45deg, #8fbf8f, #619251);
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 2rem;
      font-weight: 700;
    }

    .blog-content {
      padding: 1.5rem;
    }

    .blog-source {
      color: #619251;
      font-size: 0.9rem;
      font-weight: 600;
      margin-bottom: 0.5rem;
    }

    .blog-title {
      color: #333;
      font-size: 1.2rem;
      margin-bottom: 1rem;
      line-height: 1.4;
    }

    .blog-excerpt {
      color: #666;
      line-height: 1.6;
      margin-bottom: 1rem;
    }

    .read-more {
      color: #619251;
      font-weight: 600;
      transition: color 0.3s ease;
    }

    .read-more:hover {
      color: #4F7942;
    }

    section#about,
    section#contact {
      background: transparent;
      padding: 8rem 1rem; /* Reduced from 12rem to 8rem */
      color: #fff;
      text-align: center;
    }

    section#about {
      margin-bottom: 6rem; /* Added space before Contact section */
    }

    section#contact {
      padding-bottom: 4rem;
    }



    #about p {
      max-width: 800px;
      margin: 0 auto;
      color: #fff;
      line-height: 1.8;
      font-size: 1.1rem;
    }

    .contact-cta {
      font-size: 1.2rem;
      margin-bottom: 2rem;
      font-weight: 300;
    }

    form {
      max-width: 500px;
      margin: 0 auto;
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }

    input,
    textarea {
      padding: 1rem;
      border: none;
      border-radius: 8px;
      background: rgba(255, 255, 255, 0.95);
      font-family: inherit;
      transition: all 0.3s ease;
    }

    input:focus,
    textarea:focus {
      outline: none;
      box-shadow: 0 0 0 3px rgba(97, 146, 81, 0.3);
    }

    button {
      align-self: flex-start;
      font-family: inherit;
      cursor: pointer;
    }

    footer {
      text-align: center;
      font-size: 0.9rem;
      color: #fff;
      padding: 2rem 1rem;
      background: transparent;
    }

    .footer-flex {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
      align-items: center;
    }

    .footer-links a {
      color: #fff;
      margin: 0 0.25rem;
    }

    .footer-blurb {
      font-size: 0.8rem;
      color: #ddd;
      margin: 0;
    }

    .back-to-top {
      position: fixed;
      bottom: 2rem;
      right: 2rem;
      background: #619251;
      color: #fff;
      border: none;
      border-radius: 50%;
      width: 50px;
      height: 50px;
      font-size: 1.5rem;
      cursor: pointer;
      transition: all 0.3s ease;
      opacity: 0;
      visibility: hidden;
      z-index: 1000;
    }

    .back-to-top.visible {
      opacity: 1;
      visibility: visible;
    }

    .back-to-top:hover {
      background: #4F7942;
      transform: translateY(-3px);
    }

    /* Cursor Trail Effect */
    .cursor-trail {
      position: fixed;
      width: 6px;
      height: 6px;
      background: rgba(97, 146, 81, 0.8);
      border-radius: 50%;
      pointer-events: none;
      z-index: 9999;
      transition: all 0.1s ease;
    }

    html {
      scroll-behavior: smooth;
    }


    @media (max-width: 768px) {
      .nav-links {
        display: none;
      }

      .hero h1 {
        font-size: 2.5rem;
      }

      .hero .tagline {
        font-size: 1.1rem;
      }

      .hero-buttons {
        flex-direction: column;
        align-items: center;
      }

      .blog-grid {
        grid-template-columns: 1fr;
      }

      .container {
        padding: 0 1rem;
      }

      /* Mobile responsiveness for chat */
      .chat-interface {
        margin: 0 1rem;
      }
      
      .chat-messages {
        height: 300px;
        padding: 1rem;
      }
      
      .message-content {
        max-width: 90%;
      }
      
  .message-text {
    padding: 0.75rem 1rem;
  }
}

  </style>
</head>

<body>
  <!-- Loading Screen -->
  <div class="loading-screen" id="loadingScreen">
    <div class="loading-content">
      <div class="loading-text">Welcome to Fernly Health</div>
    </div>
  </div>


  <header>
    <div class="container">
      <nav>
        <div class="logo">
          <img src="images/Fernly-logo.png" alt="Fernly Health Logo">
          <span>Fernly Health</span>
        </div>
        <ul class="nav-links">
          <li><a href="#home">Home</a></li>
          <li><a href="#about">About</a></li>
          <li><a href="services.html">Services</a></li>
          <li><a href="team.html">Team</a></li>
          <li><a href="#contact">Contact</a></li>
          <li><a href="login.html">Login</a></li>
          <li><a href="#contact" class="btn-primary">Get Started</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <section id="home" class="hero">
    <div class="container">
      <h1>
        <span class="word" data-word="Recover.">Recover.</span>
        <span class="word" data-word="Rebuild.">Rebuild.</span>
        <span class="word" data-word="Thrive.">Thrive.</span>
      </h1>
      <p class="tagline">Because just 'okay' isn't good enough</p>
      <div class="hero-buttons">
        <a href="#ai-chat" class="btn-ai">Chat with Fernly</a>
        <a href="services.html" class="btn-primary">Our Services</a>
        <a href="#contact" class="btn-secondary">Free Consultation</a>
      </div>
    </div>
  </section>

  <!-- AI Chat Section -->
  <section id="ai-chat">
    <div class="container">
      <h2 class="section-title">Ask Away We're Listening</h2>
      <p class="chat-intro">Get detailed answers on medications, mental health conditions, and quick wellness check-ins confidentially and judgment free.</p>

      <div class="chat-interface">
        <div class="chat-messages" id="chatMessages">
          <!-- Chat output area for compatibility -->
          <div id="chatOutput" style="display: none;"></div>
          <div class="message bot">
            <div class="message-content">
              <div class="message-text">
                Hi there! I'm here to listen and help. How are you feeling today?
              </div>
            </div>
          </div>
          <!-- AI/Fallback Status Indicator moved below greeting -->
          <div id="aiStatusIndicator" class="ai-status-indicator" style="display: none;">
            <div class="status-content">
              <span class="status-icon">‚è≥</span>
              <span class="status-text">Loading AI model...</span>
            </div>
          </div>
          <div class="message bot">
            <div class="message-content">
              <div class="message-text">
                <div class="medical-disclaimer">
                  <strong>Wellness Support:</strong> I can provide general information about mental health and medications, and help you explore your wellness concerns. Please consult with a healthcare provider for medical advice.
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="chat-input-area">
          <form id="chatForm">
            <div class="input-container">
              <textarea 
                class="chat-input" 
                id="chatInput" 
                placeholder="Tell me what's on your mind..."
                rows="1"
              ></textarea>
              <button type="submit" class="chat-send" id="chatSend" aria-label="Send message">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M22 2L11 13M22 2L15 22L11 13M22 2L2 9L11 13" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
              </button>
            </div>
          </form>
          <input type="file" id="aiFileInput" multiple title="Select up to 10 text files under 1 MB each">
          <button id="aiUploadBtn" title="Upload selected files for AI search">Upload Files</button>
          <div class="upload-help">Upload up to 10 plain text files (max 1&nbsp;MB each). Sources below each answer show which file snippet was used.</div>
          <span id="aiFileStatus" style="font-size:0.9em;color:#888;"></span>
          <span id="aiAIStatus" style="font-size:0.9em;color:#888;margin-left:1em;"></span>
          <div class="disclaimer">
            This AI assistant provides general information only. It's not a substitute for professional medical advice. If you're in crisis, please call 988 or seek immediate help.
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Blank section between hero and resources -->
  <section class="blank-section"></section>

  <section id="blog">
    <div class="container">
      <h2 class="section-title">Mental Health Resources</h2>
      <div class="blog-grid">
        <div class="blog-card">
          <div class="blog-image">ANX</div>
          <div class="blog-content">
            <div class="blog-source">Psychology Today</div>
            <h3 class="blog-title">What to Do When Your Anxiety Won't Go Away</h3>
            <p class="blog-excerpt">A practical guide to calming persistent anxiety using simple, everyday strategies rooted in mindfulness and self-care.</p>
            <a href="https://www.psychologytoday.com/us/blog/anxiety-zen/201505/what-do-when-your-anxiety-won-t-go-away" target="_blank" class="read-more">Read More ‚Üí</a>
          </div>
        </div>
        <div class="blog-card">
          <div class="blog-image">RES</div>
          <div class="blog-content">
            <div class="blog-source">American Psychological Association</div>
            <h3 class="blog-title">The Science of Resilience: Building Mental Strength</h3>
            <p class="blog-excerpt">Evidence-based strategies for developing psychological resilience and coping mechanisms in challenging times.</p>
            <a href="https://www.apa.org/topics/resilience" target="_blank" class="read-more">Read More ‚Üí</a>
          </div>
        </div>
        <div class="blog-card">
          <div class="blog-image">MIN</div>
          <div class="blog-content">
            <div class="blog-source">PsychCentral</div>
            <h3 class="blog-title">Mindfulness and Recovery: A Holistic Approach</h3>
            <p class="blog-excerpt">How mindfulness practices can enhance traditional therapy and support long-term mental health recovery.</p>
            <a href="https://psychcentral.com/blog/mindfulness-in-mental-health-recovery" target="_blank" class="read-more">Read More ‚Üí</a>
          </div>
        </div>
        <div class="blog-card">
          <div class="blog-image">RES</div>
          <div class="blog-content">
            <div class="blog-source">PsyPost</div>
            <h3 class="blog-title">Latest Research on Depression Treatment</h3>
            <p class="blog-excerpt">New findings on personalized treatment approaches and the role of genetics in depression management.</p>
            <a href="https://www.psypost.org/category/mental-health/depression/" target="_blank" class="read-more">Read More ‚Üí</a>
          </div>
        </div>
        <div class="blog-card">
          <div class="blog-image">REL</div>
          <div class="blog-content">
            <div class="blog-source">Verywell Mind</div>
            <h3 class="blog-title">8 Ways to Provide Emotional Support for Your Partner</h3>
            <p class="blog-excerpt">Practical, emotionally grounded tips‚Äîlike active listening, meaningful gestures, and emotional validation‚Äîto help partners feel seen, heard, and supported during tough times.</p>
            <a href="https://www.verywellmind.com/how-to-provide-emotional-support-for-your-partner-7505967" target="_blank" class="read-more">Read More ‚Üí</a>
          </div>
        </div>
        <div class="blog-card">
          <div class="blog-image">MH</div>
          <div class="blog-content">
            <div class="blog-source">MedlinePlus</div>
            <h3 class="blog-title">Psychiatric Medications Guide</h3>
            <p class="blog-excerpt">Comprehensive information about mental health conditions, symptoms, and treatment approaches for various psychological wellbeing concerns.</p>
            <a href="https://medlineplus.gov/mentalhealthmedicines.html" target="_blank" class="read-more">Read More ‚Üí</a>
          </div>
        </div>
      </div>
    </div>
  </section>

  <section id="about">
    <div class="container">
      <h2 class="section-title">Reclaim Your Well Being with Fernly Health</h2>
      <p>At Fernly Health, we partner with you every step of your mental health and recovery journey. Helping you heal, grow, and reclaim balance. Our Arizona wide team of board certified psychiatrists, psychologists, therapists, and psychiatric nurse practitioners deliver compassionate, evidence based care in person or online. Ready to take the first step? Visit us today.</p>
    </div>
  </section>

  <section id="contact">
    <div class="container">
      <h2 class="section-title">Contact Us</h2>
      <p class="contact-cta">Reach out for a free consultation ‚Äì your healing starts here.</p>
      <form id="contactForm">
        <input type="text" placeholder="Name" required>
        <input type="email" placeholder="Email" required>
        <textarea rows="4" placeholder="How can we help?" required></textarea>
        <button type="submit" class="btn-primary">Send Message</button>
      </form>
    </div>
  </section>


  <footer>
    <div class="container footer-flex">
      <div class="footer-links">
        <a href="#">Privacy</a> |
        <a href="#">Careers</a>
      </div>
      <p class="footer-blurb">Proudly serving Phoenix, Tucson and communities across Arizona.</p>
      <p>&copy; 2025 Fernly Health. All rights reserved.</p>
    </div>
  </footer>

  <!-- Back to Top Button -->
  <button type="button" id="backToTop" class="back-to-top" aria-label="Back to top">‚Üë</button>

  <!-- JAVASCRIPT WILL GO HERE -->
  <script>
// Initialize loading screen and AI
window.addEventListener('load', () => {
  // Transformers.js loads from the CDN declared in the page head
  console.log('Transformers.js loaded from CDN');

  setTimeout(() => {
    document.getElementById('loadingScreen').classList.add('fade-out');
    
    // Start hero words animation immediately as fade-out begins for seamless transition
    const logo = document.querySelector('.logo');
    if (logo) logo.classList.add('start-animation');
    startHeroWordsAnimation();
    
    // Initialize AI and hide loading screen after fade completes
    setTimeout(async () => {
      document.getElementById('loadingScreen').style.display = 'none';
      if (typeof initializeAIChat === 'function') {
        await initializeAIChat();
      }
    }, 1000);
  }, 3000);
});

// Smooth scrolling
document.querySelectorAll('a[href^="#"]').forEach(anchor => {
  anchor.addEventListener('click', function(e) {
    e.preventDefault();
    const target = document.querySelector(this.getAttribute('href'));
    if (target) {
      target.scrollIntoView({
        behavior: 'smooth',
        block: 'start'
      });
    }
  });
});

// Navbar scroll effect
window.addEventListener('scroll', function() {
  const header = document.querySelector('header');
  if (window.scrollY > 100) {
    header.style.background = 'rgba(255,255,255,0.98)';
  } else {
    header.style.background = 'rgba(255,255,255,0.95)';
  }
});

// Back to top button
const backToTopBtn = document.getElementById('backToTop');
window.addEventListener('scroll', function() {
  if (window.scrollY > 300) {
    backToTopBtn.classList.add('visible');
  } else {
    backToTopBtn.classList.remove('visible');
  }
});

backToTopBtn.addEventListener('click', function() {
  window.scrollTo({
    top: 0,
    behavior: 'smooth'
  });
});

// Hero words animation sequence
function startHeroWordsAnimation() {
  const words = document.querySelectorAll('.hero h1 .word');
  words.forEach(word => {
    word.style.animationPlayState = 'running';
  });

  // Show tagline once the last word finishes
  setTimeout(() => {
    const tagline = document.querySelector('.hero .tagline');
    if (tagline) {
      tagline.classList.add('show');
    }
  }, 2700);
}

// Tagline animation - now handled by startHeroWordsAnimation()
// setTimeout(() => {
//   const tagline = document.querySelector('.hero .tagline');
//   tagline.classList.add('show');
// }, 5000);


// Cursor trail effect
let cursorTrails = [];
const maxTrails = 20;

document.addEventListener('mousemove', function(e) {
  const trail = document.createElement('div');
  trail.className = 'cursor-trail';
  trail.style.left = e.pageX - 3 + 'px';
  trail.style.top = e.pageY - 3 + 'px';
  document.body.appendChild(trail);

  cursorTrails.push(trail);

  if (cursorTrails.length > maxTrails) {
    const oldTrail = cursorTrails.shift();
    if (oldTrail && oldTrail.parentNode) {
      oldTrail.parentNode.removeChild(oldTrail);
    }
  }

  setTimeout(() => {
    if (trail.parentNode) {
      trail.style.opacity = '0';
      trail.style.transform = 'scale(0.5)';
      setTimeout(() => {
        if (trail.parentNode) {
          trail.parentNode.removeChild(trail);
        }
      }, 200);
    }
  }, 100);
});

// AI Chatbot Functionality for the new interface
const chatMessages = document.getElementById('chatMessages');
const chatInput = document.getElementById('chatInput');
const chatSend = document.getElementById('chatSend');

// Auto-resize textarea
chatInput.addEventListener('input', () => {
  chatInput.style.height = 'auto';
  chatInput.style.height = Math.min(chatInput.scrollHeight, 120) + 'px';
});

// Send message on Enter key (but allow Shift+Enter for new lines)
chatInput.addEventListener('keydown', (e) => {
  if (e.key === 'Enter' && !e.shiftKey) {
    e.preventDefault();
    sendMessage();
  }
});

// Send message on button click
chatSend.addEventListener('click', sendMessage);

// Handle form submission
document.getElementById('chatForm').addEventListener('submit', function(e) {
  e.preventDefault();
  sendMessage();
});

// Enhanced message sending function with AI
async function sendMessage() {
  const message = chatInput.value.trim();
  if (!message) return;

  // Disable send button and input
  chatSend.disabled = true;
  chatInput.disabled = true;

  // Add user message
  addMessage(message, 'user');
  chatInput.value = '';
  chatInput.style.height = 'auto';

  // Show typing indicator
  const typingIndicator = addTypingIndicator();
  
  try {
    // Generate response using new AI assistant
    const answer = await window.aiGetAnswer(message, 'aiAIStatus');

    // Remove typing indicator and add AI response
    if (typingIndicator && typingIndicator.parentNode) {
      chatMessages.removeChild(typingIndicator);
    }

    const responseElement = addMessage(answer.text + (
      answer.sources?.length
        ? `<div style="font-size:0.85em;color:#888;">Source: ${answer.sources.map(s => `${s.file} [${s.snippet}]`).join(', ')}</div>`
        : ''
    ), 'bot');
  } catch (error) {
    console.error('Error generating response:', error);
    if (typingIndicator && typingIndicator.parentNode) {
      chatMessages.removeChild(typingIndicator);
    }
    addMessage("I'm sorry, I'm having trouble processing that right now. Let me try again with a different approach.", 'bot');
  } finally {
    // Re-enable send button and input
    chatSend.disabled = false;
    chatInput.disabled = false;
    chatInput.focus();
  }
}

// Enhanced message display function
function addMessage(text, type) {
  const messageDiv = document.createElement('div');
  messageDiv.className = `message ${type}`;
  
  // Check if the message contains HTML (for resource cards)
  if (text.includes('<div class="medication-info">') || text.includes('<div class="wellness-assessment">') || text.includes('<div class="resource-card">')) {
    messageDiv.innerHTML = `
      <div class="message-content">
        <div class="message-text">${text}</div>
      </div>
    `;
  } else {
    messageDiv.innerHTML = `
      <div class="message-content">
        <div class="message-text">${text}</div>
      </div>
    `;
  }
  
  chatMessages.appendChild(messageDiv);
  chatMessages.scrollTop = chatMessages.scrollHeight;
  return messageDiv;
}

// Typing indicator function
function addTypingIndicator() {
  const messageDiv = document.createElement('div');
  messageDiv.className = 'message bot';
  
  messageDiv.innerHTML = `
    <div class="message-content">
      <div class="typing-indicator">
        <span></span>
        <span></span>
        <span></span>
      </div>
    </div>
  `;
  
  chatMessages.appendChild(messageDiv);
  chatMessages.scrollTop = chatMessages.scrollHeight;
  return messageDiv;
}

// Contact form submission
document.getElementById('contactForm').addEventListener('submit', function(e) {
  e.preventDefault();
  alert('Thank you for your message! We\'ll get back to you soon.');
  this.reset();
});

// Intersection Observer for animations
const observerOptions = {
  threshold: 0.1,
  rootMargin: '0px 0px -50px 0px'
};

const observer = new IntersectionObserver((entries) => {
  entries.forEach(entry => {
    if (entry.isIntersecting) {
      entry.target.style.opacity = '1';
      entry.target.style.transform = 'translateY(0)';
    }
  });
}, observerOptions);

// Observe all cards and team members
document.querySelectorAll('.blog-card').forEach(el => {
  el.style.opacity = '0';
  el.style.transform = 'translateY(30px)';
  el.style.transition = 'opacity 0.6s ease, transform 0.6s ease';
  observer.observe(el);
});

</script>
<script type="module">
import { aiHandleFileUpload, aiGetAnswer, ensureLlmLoaded } from './aiAssistant.js';
window.aiGetAnswer = aiGetAnswer;
window.aiHandleFileUpload = aiHandleFileUpload;
window.ensureLlmLoaded = ensureLlmLoaded;
document.getElementById('aiUploadBtn').onclick = () => aiHandleFileUpload('aiFileInput', 'aiFileStatus');
if (window.transformers) {
  ensureLlmLoaded('aiAIStatus');
} else {
  document.getElementById('aiAIStatus').innerText = 'AI library not available';
}
</script>
</body>

</html>

